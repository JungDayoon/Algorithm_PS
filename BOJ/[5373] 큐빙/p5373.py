def rotate(plane):
    global cubeColor

    newColor = [0 for _ in range(54)]
    for i in range(54):
        newColor[i] = cubeColor[cubeInfo[plane][i]]

    cubeColor = newColor[:]


cubeInfo = [
    [
        2, 5, 8, 1, 4, 7, 0, 3, 6,
        36, 37, 38, 12, 13, 14, 15, 16, 17,
        9, 10, 11, 21, 22, 23, 24, 25, 26,
        18, 19, 20, 30, 31, 32, 33, 34, 35,
        27, 28, 29, 39, 40, 41, 42, 43, 44,
        45, 46, 47, 48, 49, 50, 51, 52, 53
    ],
    [
        0, 1, 2, 3, 4, 5, 6, 7, 8,
        9, 10, 11, 12, 13, 14, 24, 25, 26,
        18, 19, 20, 21, 22, 23, 33, 34, 35,
        27, 28, 29, 30, 31, 32, 42, 43, 44,
        36, 37, 38, 39, 40, 41, 15, 16, 17,
        47, 50, 53, 46, 49, 52, 45, 48, 51
    ],
    [
        0, 1, 2, 3, 4, 5, 27, 30, 33,
        9, 10, 8, 12, 13, 7, 15, 16, 6,
        20, 23, 26, 19, 22, 25, 18, 21, 24,
        47, 28, 29, 46, 31, 32, 45, 34, 35,
        36, 37, 38, 39, 40, 41, 42, 43, 44,
        11, 14, 17, 48, 49, 50, 51, 52, 53
    ]
    ,
    [
        15, 12, 9, 3, 4, 5, 6, 7, 8,
        51, 10, 11, 52, 13, 14, 53, 16, 17,
        18, 19, 20, 21, 22, 23, 24, 25, 26,
        27, 28, 0, 30, 31, 1, 33, 34, 2,
        38, 41, 44, 37, 40, 43, 36, 39, 42,
        45, 46, 47, 48, 49, 50, 35, 32, 29
    ]
    ,
    [
        18, 1, 2, 21, 4, 5, 24, 7, 8,
        11, 14, 17, 10, 13, 16, 9, 12, 15,
        45, 19, 20, 48, 22, 23, 51, 25, 26,
        27, 28, 29, 30, 31, 32, 33, 34, 35,
        36, 37, 6, 39, 40, 3, 42, 43, 0,
        44, 46, 47, 41, 49, 50, 38, 52, 53
    ]
    ,
    [
        0, 1, 42, 3, 4, 39, 6, 7, 36,
        9, 10, 11, 12, 13, 14, 15, 16, 17,
        18, 19, 2, 21, 22, 5, 24, 25, 8,
        29, 32, 35, 28, 31, 34, 27, 30, 33,
        53, 37, 38, 50, 40, 41, 47, 43, 44,
        45, 46, 20, 48, 49, 23, 51, 52, 26
    ]
]
color = ['w', 'g', 'r', 'b', 'o', 'y']
dict = {'U': 0, 'D': 1, 'F': 2, 'B': 3, 'L': 4, 'R': 5}

T = int(input())
for t_c in range(T):
    cubeColor = [0 for _ in range(54)]
    for i in range(len(cubeColor) // 9):
        for j in range(9):
            cubeColor[i * 9 + j] = i

    rotate_cnt = int(input())
    Tmp = str(input())
    tmp = Tmp.split(" ")

    for rc in range(rotate_cnt):
        rotatePlane, rotateDir = tmp[rc][0], tmp[rc][1]
        if rotateDir == '-':
            rotate(dict[rotatePlane])
        else:
            for i in range(3):
                rotate(dict[rotatePlane])

        # out = ""
        # for i in range(54):
        #     out += color[cubeColor[i]]
        #     if i % 3 == 2:
        #         print(out)
        #         out = ""
        # print()

    out = ""
    for i in range(9):
        out += color[cubeColor[i]]
        if i % 3 == 2:
            print(out)
            out = ""
